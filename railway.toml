# Railway Configuration - Microservicio Proveedores y Facturación
# https://docs.railway.app/deploy/config-as-code

[build]
# Comando de construcción
builder = "NIXPACKS"
buildCommand = "mvn clean package -DskipTests"

[deploy]
# Puerto del servicio (Railway usa $PORT automáticamente)
startCommand = "java -Dserver.port=$PORT -jar target/microservice-proveedores-facturacion-1.0.0.jar"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

# Health check
healthcheckPath = "/actuator/health"
healthcheckTimeout = 300

[env]
# Variables de entorno predeterminadas
JAVA_VERSION = "17"
MAVEN_VERSION = "3.9"

# Spring Boot
SPRING_PROFILES_ACTIVE = "production"
SPRING_JPA_HIBERNATE_DDL_AUTO = "update"
SPRING_JPA_SHOW_SQL = "false"

# Configuración del servidor
SERVER_PORT = "$PORT"

# Logging
LOGGING_LEVEL_ROOT = "INFO"
LOGGING_LEVEL_COM_MULTIPEDIDOS = "INFO"

# JVM Options
JAVA_OPTS = "-Xmx512m -Xms256m"

# ============================================
# VARIABLES QUE SE DEBEN CONFIGURAR EN RAILWAY
# ============================================
# Ir a Settings → Variables y agregar:
#
# DATABASE_URL (Usar variable de Railway: ${{Postgres.DATABASE_URL}})
# O configurar manualmente:
# PGHOST
# PGPORT
# PGDATABASE
# PGUSER
# PGPASSWORD
#
# MICROSERVICE_CLIENTES_URL (URL del Microservicio A desplegado)
# Ejemplo: https://multipedidos-clientes-api-production.up.railway.app

